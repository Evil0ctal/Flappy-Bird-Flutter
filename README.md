# ğŸ¦ Flutteræ¸¸æˆå¼€å‘æ•™ç¨‹ï¼šä»é›¶å¼€å§‹æ‰“é€ Flappy Bird

[![Flutter](https://img.shields.io/badge/Flutter-3.8+-blue.svg)](https://flutter.dev)
[![Flame](https://img.shields.io/badge/Flame-1.18+-orange.svg)](https://flame-engine.org)
[![æ•™å­¦é¡¹ç›®](https://img.shields.io/badge/æ•™å­¦é¡¹ç›®-æ¸¸æˆå¼€å‘-green.svg)](#)
[![Version](https://img.shields.io/badge/Version-1.0.0-brightgreen.svg)](#)

> ğŸ“ **å®Œæ•´çš„Flutteræ¸¸æˆå¼€å‘æ•™ç¨‹é¡¹ç›®** - ä»é›¶åŸºç¡€åˆ°å®Œæ•´æ¸¸æˆï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨Flutterå’ŒFlameå¼•æ“å¼€å‘ç°ä»£ç§»åŠ¨æ¸¸æˆ

## ğŸ“¸ æ¸¸æˆæˆªå›¾

<table>
  <tr>
    <td align="center">
      <img src="screenshots/home_screen.png" width="250" alt="ä¸»èœå•ç•Œé¢"/>
      <br/>ä¸»èœå•ç•Œé¢
    </td>
    <td align="center">
      <img src="screenshots/gameplay.png" width="250" alt="æ¸¸æˆè¿›è¡Œä¸­"/>
      <br/>æ¸¸æˆè¿›è¡Œä¸­
    </td>
    <td align="center">
      <img src="screenshots/game_over.png" width="250" alt="æ¸¸æˆç»“æŸç•Œé¢"/>
      <br/>æ¸¸æˆç»“æŸç•Œé¢
    </td>
  </tr>
  <tr>
    <td align="center">
      <img src="screenshots/settings.png" width="250" alt="è®¾ç½®ç•Œé¢"/>
      <br/>è®¾ç½®ç•Œé¢
    </td>
    <td align="center">
      <img src="screenshots/info.png" width="250" alt="ä¿¡æ¯ç•Œé¢"/>
      <br/>ä¿¡æ¯ç•Œé¢
    </td>
    <td align="center">
      <img src="screenshots/game_play.gif" width="250" alt="æ¸¸æˆè¿è¡ŒåŠ¨å›¾"/>
      <br/>æ¸¸æˆè¿è¡ŒåŠ¨å›¾
    </td>
  </tr>
</table>

## ğŸ“š æ•™ç¨‹æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªä¸“ä¸º**åˆå­¦è€…è®¾è®¡çš„Flutteræ¸¸æˆå¼€å‘æ•™ç¨‹é¡¹ç›®**ã€‚é€šè¿‡é‡æ–°åˆ¶ä½œç»å…¸çš„Flappy Birdæ¸¸æˆï¼Œä½ å°†å­¦åˆ°ï¼š

- âœ… FlutteråŸºç¡€çŸ¥è¯†å’Œè¿›é˜¶æŠ€å·§
- âœ… Flameæ¸¸æˆå¼•æ“çš„ä½¿ç”¨æ–¹æ³•
- âœ… 2Dæ¸¸æˆå¼€å‘çš„å®Œæ•´æµç¨‹
- âœ… ç‰©ç†æ¨¡æ‹Ÿã€åŠ¨ç”»å’Œç‰¹æ•ˆåˆ¶ä½œ
- âœ… éŸ³é¢‘ç³»ç»Ÿå’Œæ•°æ®æŒä¹…åŒ–
- âœ… å›½é™…åŒ–å’Œè·¨å¹³å°éƒ¨ç½²

## ğŸ¯ å­¦ä¹ ç›®æ ‡

### ğŸ“– åŸºç¡€çŸ¥è¯†ï¼ˆé€‚åˆFlutteræ–°æ‰‹ï¼‰
- Flutterç¯å¢ƒæ­å»ºå’Œé¡¹ç›®åˆ›å»º
- Widgetçš„ç»„åˆå’Œå¸ƒå±€è®¾è®¡
- çŠ¶æ€ç®¡ç†å’Œé¡µé¢å¯¼èˆª
- åŠ¨ç”»å’Œè‡ªå®šä¹‰ç»˜åˆ¶

### ğŸ® æ¸¸æˆå¼€å‘æ ¸å¿ƒ
- Flameæ¸¸æˆå¼•æ“åŸºç¡€
- æ¸¸æˆå¾ªç¯å’Œç»„ä»¶ç³»ç»Ÿ
- ç‰©ç†æ¨¡æ‹Ÿï¼ˆé‡åŠ›ã€ç¢°æ’æ£€æµ‹ï¼‰
- ç²¾çµåŠ¨ç”»å’Œæ¸²æŸ“æŠ€æœ¯

### ğŸŒŸ è¿›é˜¶ç‰¹æ€§
- ç²’å­ç³»ç»Ÿè®¾è®¡
- éŸ³é¢‘ç®¡ç†å’Œå¾ªç¯æ’­æ”¾
- å¤šè¯­è¨€å›½é™…åŒ–
- æ€§èƒ½ä¼˜åŒ–æŠ€å·§

## ğŸš€ å‡†å¤‡å·¥ä½œ

### ç¯å¢ƒè¦æ±‚
```bash
# æ£€æŸ¥Flutterç‰ˆæœ¬
flutter --version
# éœ€è¦Flutter 3.8+

# æ£€æŸ¥å¼€å‘ç¯å¢ƒ
flutter doctor
```

### å¿…è¦çš„å¼€å‘å·¥å…·
- **Flutter SDK 3.8+**
- **Android Studio** æˆ– **VS Code**
- **iOS Simulator**ï¼ˆMacç”¨æˆ·ï¼‰æˆ– **Androidæ¨¡æ‹Ÿå™¨**
- **Git**ï¼ˆç”¨äºç‰ˆæœ¬æ§åˆ¶ï¼‰

### å¿«é€Ÿå¼€å§‹
```bash
# 1. å…‹éš†æ•™ç¨‹é¡¹ç›®
git clone https://github.com/Evil0ctal/Flappy-Bird-Flutter.git
cd Flappy-Bird-Flutter

# 2. å®‰è£…ä¾èµ–
flutter pub get

# 3. è¿è¡Œé¡¹ç›®
flutter run
```

## ğŸ“‹ æ•™ç¨‹å¤§çº²

### ç¬¬ä¸€ç« ï¼šé¡¹ç›®åŸºç¡€æ­å»º
1. [åˆ›å»ºFlutteré¡¹ç›®](#ç¬¬ä¸€ç« åˆ›å»ºflutteré¡¹ç›®)
2. [æ·»åŠ Flameæ¸¸æˆå¼•æ“](#æ·»åŠ flameæ¸¸æˆå¼•æ“)
3. [é¡¹ç›®ç»“æ„è®¾è®¡](#é¡¹ç›®ç»“æ„è®¾è®¡)
4. [åŸºç¡€é¡µé¢æ­å»º](#åŸºç¡€é¡µé¢æ­å»º)

### ç¬¬äºŒç« ï¼šæ¸¸æˆæ ¸å¿ƒç»„ä»¶
5. [åˆ›å»ºæ¸¸æˆä¸»ç±»](#ç¬¬äºŒç« åˆ›å»ºæ¸¸æˆä¸»ç±»)
6. [å®ç°å°é¸Ÿç»„ä»¶](#å®ç°å°é¸Ÿç»„ä»¶)
7. [åˆ¶ä½œç®¡é“éšœç¢](#åˆ¶ä½œç®¡é“éšœç¢)
8. [è®¾è®¡æ»šåŠ¨èƒŒæ™¯](#è®¾è®¡æ»šåŠ¨èƒŒæ™¯)

### ç¬¬ä¸‰ç« ï¼šæ¸¸æˆé€»è¾‘å®ç°
9. [ç‰©ç†ç³»ç»Ÿä¸é‡åŠ›](#ç¬¬ä¸‰ç« ç‰©ç†ç³»ç»Ÿä¸é‡åŠ›)
10. [ç¢°æ’æ£€æµ‹ç³»ç»Ÿ](#ç¢°æ’æ£€æµ‹ç³»ç»Ÿ)
11. [å¾—åˆ†ç³»ç»Ÿ](#å¾—åˆ†ç³»ç»Ÿ)
12. [æ¸¸æˆçŠ¶æ€ç®¡ç†](#æ¸¸æˆçŠ¶æ€ç®¡ç†)

### ç¬¬å››ç« ï¼šç”¨æˆ·ç•Œé¢è®¾è®¡
13. [ä¸»èœå•ç•Œé¢](#ç¬¬å››ç« ä¸»èœå•ç•Œé¢)
14. [æ¸¸æˆå€’è®¡æ—¶](#æ¸¸æˆå€’è®¡æ—¶)
15. [æ¸¸æˆç»“æŸç•Œé¢](#æ¸¸æˆç»“æŸç•Œé¢)
16. [è®¾ç½®å’Œå…³äºé¡µé¢](#è®¾ç½®å’Œå…³äºé¡µé¢)

### ç¬¬äº”ç« ï¼šéŸ³æ•ˆä¸ç‰¹æ•ˆ
17. [éŸ³é¢‘ç³»ç»Ÿè®¾è®¡](#ç¬¬äº”ç« éŸ³é¢‘ç³»ç»Ÿè®¾è®¡)
18. [ç²’å­ç‰¹æ•ˆç³»ç»Ÿ](#ç²’å­ç‰¹æ•ˆç³»ç»Ÿ)
19. [åŠ¨ç”»ä¸è¿‡æ¸¡æ•ˆæœ](#åŠ¨ç”»ä¸è¿‡æ¸¡æ•ˆæœ)

### ç¬¬å…­ç« ï¼šæ•°æ®å­˜å‚¨ä¸è®¾ç½®
20. [æœ¬åœ°æ•°æ®å­˜å‚¨](#ç¬¬å…­ç« æœ¬åœ°æ•°æ®å­˜å‚¨)
21. [é«˜åˆ†è®°å½•ç³»ç»Ÿ](#é«˜åˆ†è®°å½•ç³»ç»Ÿ)
22. [æ¸¸æˆè®¾ç½®åŠŸèƒ½](#æ¸¸æˆè®¾ç½®åŠŸèƒ½)

### ç¬¬ä¸ƒç« ï¼šå›½é™…åŒ–ä¸ä¼˜åŒ–
23. [å¤šè¯­è¨€æ”¯æŒ](#ç¬¬ä¸ƒç« å¤šè¯­è¨€æ”¯æŒ)
24. [æ€§èƒ½ä¼˜åŒ–æŠ€å·§](#æ€§èƒ½ä¼˜åŒ–æŠ€å·§)
25. [è·¨å¹³å°é€‚é…](#è·¨å¹³å°é€‚é…)

---

## ç¬¬ä¸€ç« ï¼šåˆ›å»ºFlutteré¡¹ç›®

### ğŸ¯ å­¦ä¹ ç›®æ ‡
- æŒæ¡Flutteré¡¹ç›®åˆ›å»ºæµç¨‹
- äº†è§£é¡¹ç›®ç›®å½•ç»“æ„
- é…ç½®æ¸¸æˆå¼€å‘ä¾èµ–

### æ­¥éª¤1ï¼šåˆ›å»ºæ–°é¡¹ç›®
```bash
# åˆ›å»ºFlutteré¡¹ç›®
flutter create flappy_bird_flutter
cd flappy_bird_flutter

# æµ‹è¯•é¡¹ç›®æ˜¯å¦æ­£å¸¸è¿è¡Œ
flutter run
```

### æ·»åŠ Flameæ¸¸æˆå¼•æ“

ç¼–è¾‘ `pubspec.yaml` æ–‡ä»¶ï¼Œæ·»åŠ æ¸¸æˆå¼€å‘å¿…éœ€çš„ä¾èµ–ï¼š

```yaml
dependencies:
  flutter:
    sdk: flutter
  flutter_localizations:  # å›½é™…åŒ–æ”¯æŒ
    sdk: flutter
    
  # æ¸¸æˆå¼•æ“
  flame: ^1.18.0
  
  # éŸ³é¢‘æ’­æ”¾
  audioplayers: ^6.0.0
  
  # æœ¬åœ°å­˜å‚¨
  shared_preferences: ^2.2.3
  
  # çŠ¶æ€ç®¡ç†
  provider: ^6.1.2
  
  # å›½é™…åŒ–
  intl: ^0.20.2
  
  # URLå¯åŠ¨å™¨
  url_launcher: ^6.2.5

dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^5.0.0
  
  # åº”ç”¨å›¾æ ‡ç”Ÿæˆ
  flutter_launcher_icons: ^0.13.1
```

### é¡¹ç›®ç»“æ„è®¾è®¡

åˆ›å»ºä»¥ä¸‹ç›®å½•ç»“æ„ï¼š

```
lib/
â”œâ”€â”€ main.dart                    # åº”ç”¨å…¥å£
â”œâ”€â”€ game/                        # æ¸¸æˆå¼•æ“ç»„ä»¶
â”‚   â”œâ”€â”€ flappy_game.dart        # æ¸¸æˆä¸»å¾ªç¯
â”‚   â”œâ”€â”€ bird.dart               # å°é¸Ÿç»„ä»¶
â”‚   â”œâ”€â”€ pipe.dart               # ç®¡é“ç»„ä»¶
â”‚   â”œâ”€â”€ background.dart         # èƒŒæ™¯ç»„ä»¶
â”‚   â”œâ”€â”€ score_text.dart         # åˆ†æ•°æ˜¾ç¤º
â”‚   â””â”€â”€ particle_system.dart    # ç²’å­ç³»ç»Ÿ
â”œâ”€â”€ screens/                     # ç”¨æˆ·ç•Œé¢
â”‚   â”œâ”€â”€ home_screen.dart        # ä¸»èœå•
â”‚   â”œâ”€â”€ countdown_screen.dart   # å€’è®¡æ—¶é¡µé¢
â”‚   â”œâ”€â”€ game_over_screen.dart   # æ¸¸æˆç»“æŸ
â”‚   â”œâ”€â”€ about_dialog.dart       # å…³äºå¯¹è¯æ¡†
â”‚   â””â”€â”€ settings_dialog.dart    # è®¾ç½®å¯¹è¯æ¡†
â”œâ”€â”€ services/                    # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ audio_service.dart      # éŸ³é¢‘ç®¡ç†
â”‚   â””â”€â”€ storage_service.dart    # æ•°æ®å­˜å‚¨
â”œâ”€â”€ l10n/                       # å›½é™…åŒ–æ–‡ä»¶
â””â”€â”€ utils/                      # å·¥å…·ç±»
```

### åŸºç¡€é¡µé¢æ­å»º

é¦–å…ˆåˆ›å»ºåº”ç”¨çš„å…¥å£æ–‡ä»¶ `lib/main.dart`ï¼š

```dart
import 'package:flutter/material.dart';
import 'package:flutter_localizations/flutter_localizations.dart';
import 'package:provider/provider.dart';
import 'services/storage_service.dart';
import 'screens/home_screen.dart';
import 'l10n/app_localizations.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  
  // åˆå§‹åŒ–å­˜å‚¨æœåŠ¡
  final storageService = StorageService();
  await storageService.init();
  
  runApp(FlappyBirdApp(storageService: storageService));
}

class FlappyBirdApp extends StatelessWidget {
  final StorageService storageService;
  
  const FlappyBirdApp({super.key, required this.storageService});

  @override
  Widget build(BuildContext context) {
    return Provider.value(
      value: storageService,
      child: MaterialApp(
        title: 'Flappy Bird Flutter',
        theme: ThemeData(
          primarySwatch: Colors.blue,
          visualDensity: VisualDensity.adaptivePlatformDensity,
        ),
        home: const HomeScreen(),
        
        // å›½é™…åŒ–é…ç½®
        localizationsDelegates: const [
          AppLocalizations.delegate,
          GlobalMaterialLocalizations.delegate,
          GlobalWidgetsLocalizations.delegate,
          GlobalCupertinoLocalizations.delegate,
        ],
        supportedLocales: const [
          Locale('en'), Locale('zh'), 
          Locale('ja'), Locale('es'),
        ],
      ),
    );
  }
}
```

---

## ç¬¬äºŒç« ï¼šåˆ›å»ºæ¸¸æˆä¸»ç±»

### ğŸ¯ å­¦ä¹ ç›®æ ‡
- ç†è§£Flameæ¸¸æˆå¼•æ“çš„åŸºæœ¬æ¦‚å¿µ
- åˆ›å»ºæ¸¸æˆä¸»å¾ªç¯
- å®ç°åŸºæœ¬çš„æ¸¸æˆç»„ä»¶

### æ¸¸æˆå¼•æ“åŸºç¡€çŸ¥è¯†

Flameæ¸¸æˆå¼•æ“çš„æ ¸å¿ƒæ¦‚å¿µï¼š
- **FlameGame**: æ¸¸æˆä¸»ç±»ï¼Œç®¡ç†æ¸¸æˆå¾ªç¯
- **Component**: æ¸¸æˆä¸­çš„å„ç§å¯¹è±¡ï¼ˆå°é¸Ÿã€ç®¡é“ç­‰ï¼‰
- **GameWidget**: å°†Flameæ¸¸æˆåµŒå…¥Flutterç•Œé¢

### åˆ›å»ºæ¸¸æˆä¸»ç±»

åˆ›å»º `lib/game/flappy_game.dart`ï¼š

```dart
import 'package:flame/game.dart';
import 'package:flame/events.dart';
import '../services/storage_service.dart';
import '../services/audio_service.dart';

// å®šä¹‰æ¸¸æˆéš¾åº¦æšä¸¾
enum Difficulty { easy, normal, hard }

class FlappyGame extends FlameGame with TapDetector, HasCollisionDetection {
  final Difficulty difficulty;
  late AudioService audioService;
  
  // æ¸¸æˆçŠ¶æ€
  int score = 0;
  bool isGameOver = false;
  
  // æ¸¸æˆå‚æ•°
  double pipeSpawnTimer = 0;
  double pipeSpawnInterval = 2.0;
  
  FlappyGame({required this.difficulty});
  
  @override
  Future<void> onLoad() async {
    await super.onLoad();
    
    // è®¾ç½®ç›¸æœº
    camera.viewfinder.visibleGameSize = size;
    
    // åˆå§‹åŒ–éŸ³é¢‘æœåŠ¡
    audioService = AudioService();
    await audioService.init();
    await audioService.startBackgroundMusic();
    
    // è¿™é‡Œå°†æ·»åŠ æ¸¸æˆç»„ä»¶...
  }
  
  @override
  void update(double dt) {
    super.update(dt);
    
    if (!isGameOver) {
      // æ¸¸æˆé€»è¾‘æ›´æ–°
      _updateGameLogic(dt);
    }
  }
  
  void _updateGameLogic(double dt) {
    // ç®¡é“ç”Ÿæˆé€»è¾‘
    pipeSpawnTimer += dt;
    if (pipeSpawnTimer >= pipeSpawnInterval) {
      // ç”Ÿæˆæ–°ç®¡é“
      pipeSpawnTimer = 0;
    }
  }
  
  @override
  void onTap() {
    if (!isGameOver) {
      // å°é¸Ÿè·³è·ƒé€»è¾‘
      audioService.playJump();
    }
  }
  
  void gameOver() {
    if (isGameOver) return;
    
    isGameOver = true;
    pauseEngine();
    audioService.playGameOver();
    audioService.pauseBackgroundMusic();
    
    // æ˜¾ç¤ºæ¸¸æˆç»“æŸç•Œé¢
    overlays.add('gameOver');
  }
  
  void reset() {
    score = 0;
    isGameOver = false;
    pipeSpawnTimer = 0;
    
    // é‡ç½®æ¸¸æˆç»„ä»¶...
    
    audioService.resumeBackgroundMusic();
    resumeEngine();
  }
}
```

### ğŸ’¡ æ•™å­¦é‡ç‚¹

**æ¸¸æˆå¾ªç¯ç†è§£ï¼š**
1. `onLoad()` - æ¸¸æˆåˆå§‹åŒ–ï¼Œåªæ‰§è¡Œä¸€æ¬¡
2. `update(dt)` - æ¯å¸§éƒ½æ‰§è¡Œï¼Œdtæ˜¯æ—¶é—´é—´éš”
3. `render()` - æ¸²æŸ“ç»˜åˆ¶ï¼ˆç”±ç»„ä»¶è‡ªåŠ¨å¤„ç†ï¼‰

**äº‹ä»¶å¤„ç†ï¼š**
- `TapDetector` - å¤„ç†å±å¹•ç‚¹å‡»
- `HasCollisionDetection` - å¯ç”¨ç¢°æ’æ£€æµ‹

---

## å®ç°å°é¸Ÿç»„ä»¶

### ğŸ¯ å­¦ä¹ ç›®æ ‡
- å­¦ä¹ è‡ªå®šä¹‰ç»„ä»¶åˆ›å»º
- æŒæ¡ç‰©ç†æ¨¡æ‹ŸåŸºç¡€
- ç†è§£è‡ªå®šä¹‰ç»˜åˆ¶æŠ€æœ¯

### å°é¸Ÿç‰©ç†ç³»ç»Ÿ

åˆ›å»º `lib/game/bird.dart`ï¼š

```dart
import 'dart:math';
import 'package:flame/collisions.dart';
import 'package:flame/components.dart';
import 'package:flutter/material.dart';
import 'flappy_game.dart';

class Bird extends PositionComponent with CollisionCallbacks {
  final FlappyGame game;
  
  // ç‰©ç†å±æ€§
  final double jumpForce = -320;  // è·³è·ƒåŠ›åº¦ï¼ˆè´Ÿæ•°å‘ä¸Šï¼‰
  double velocity = 0;            // å½“å‰é€Ÿåº¦
  double time = 0;               // æ—¶é—´è®¡æ•°å™¨
  
  // åŠ¨ç”»å±æ€§
  double wingAngle = 0;          // ç¿…è†€è§’åº¦
  bool isFlapping = false;       // æ˜¯å¦åœ¨æ‰‡ç¿…è†€
  double flapDuration = 0;       // æ‰‡ç¿…è†€æŒç»­æ—¶é—´
  double tailAngle = 0;          // å°¾å·´è§’åº¦
  
  // æ­»äº¡åŠ¨ç”»
  bool isDying = false;
  double deathRotation = 0;
  double deathTime = 0;
  double birdOpacity = 1.0;
  
  Bird({required this.game}) : super(size: Vector2(40, 30));
  
  @override
  Future<void> onLoad() async {
    await super.onLoad();
    
    // è®¾ç½®åˆå§‹ä½ç½®
    position = Vector2(game.size.x * 0.3, game.size.y * 0.5);
    anchor = Anchor.center;
    
    // æ·»åŠ ç¢°æ’æ£€æµ‹
    add(CircleHitbox(
      radius: 12,
      position: Vector2(20, 15),
    ));
  }
  
  @override
  void update(double dt) {
    super.update(dt);
    time += dt;
    
    if (!game.isGameOver) {
      _updatePhysics(dt);
      _updateAnimations(dt);
      _checkBoundaries();
    } else if (isDying) {
      _updateDeathAnimation(dt);
    }
  }
  
  void _updatePhysics(double dt) {
    // åº”ç”¨é‡åŠ›
    velocity += game.gravity * dt;
    
    // æ›´æ–°ä½ç½®
    position.y += velocity * dt;
    
    // æ ¹æ®é€Ÿåº¦è°ƒæ•´è§’åº¦ï¼ˆä¿¯å†²å’Œä¸Šå‡æ•ˆæœï¼‰
    angle = (velocity / 500).clamp(-0.4, 0.4);
  }
  
  void _updateAnimations(double dt) {
    // å°¾å·´æ‘†åŠ¨
    tailAngle = sin(time * 3) * 0.1 + angle * 0.3;
    
    // ç¿…è†€æ‰‡åŠ¨åŠ¨ç”»
    if (isFlapping) {
      flapDuration += dt;
      wingAngle = sin(flapDuration * 25) * 0.4;
      
      if (flapDuration > 0.25) {
        isFlapping = false;
        flapDuration = 0;
      }
    } else {
      // æ»‘ç¿”æ—¶ç¿…è†€è½»å¾®æ‘†åŠ¨
      wingAngle = sin(time * 2) * 0.05 + velocity / 1000;
    }
  }
  
  void _checkBoundaries() {
    // ä¸Šè¾¹ç•Œæ£€æŸ¥
    if (position.y <= size.y / 2) {
      position.y = size.y / 2;
      velocity = 0;
    }
    
    // ä¸‹è¾¹ç•Œæ£€æŸ¥
    if (position.y >= game.size.y - size.y / 2) {
      position.y = game.size.y - size.y / 2;
      if (!isDying) {
        startDeathAnimation();
        game.gameOver();
      }
    }
  }
  
  void jump() {
    velocity = jumpForce;
    isFlapping = true;
    flapDuration = 0;
  }
  
  void startDeathAnimation() {
    isDying = true;
    deathTime = 0;
    deathRotation = angle;
  }
  
  // è‡ªå®šä¹‰ç»˜åˆ¶æ–¹æ³•
  @override
  void render(Canvas canvas) {
    super.render(canvas);
    
    canvas.save();
    
    // åº”ç”¨é€æ˜åº¦ï¼ˆæ­»äº¡åŠ¨ç”»ï¼‰
    if (birdOpacity < 1.0) {
      canvas.saveLayer(
        Rect.fromLTWH(0, 0, size.x, size.y),
        Paint()..color = Colors.white.withValues(alpha: birdOpacity),
      );
    }
    
    // ç»˜åˆ¶å°é¸Ÿå„éƒ¨åˆ†
    _drawShadow(canvas);
    _drawTail(canvas);
    _drawWing(canvas, isBack: true);
    _drawBody(canvas);
    _drawWing(canvas, isBack: false);
    _drawHead(canvas);
    _drawEye(canvas);
    _drawBeak(canvas);
    
    // æ¢å¤canvasçŠ¶æ€
    if (birdOpacity < 1.0) {
      canvas.restore();
    }
    canvas.restore();
  }
  
  // ç»˜åˆ¶å°é¸Ÿèº«ä½“
  void _drawBody(Canvas canvas) {
    final bodyGradient = RadialGradient(
      center: const Alignment(-0.3, -0.5),
      radius: 1.0,
      colors: [
        const Color(0xFFFFC107), // é‡‘é»„è‰²
        const Color(0xFFFF9800), // æ©™è‰²
      ],
    );
    
    final bodyPaint = Paint()
      ..shader = bodyGradient.createShader(
        Rect.fromCenter(
          center: const Offset(20, 15),
          width: 32,
          height: 24,
        ),
      );
    
    // ç»˜åˆ¶æ¤­åœ†å½¢èº«ä½“
    canvas.drawOval(
      Rect.fromCenter(
        center: const Offset(20, 15),
        width: 32,
        height: 24,
      ),
      bodyPaint,
    );
  }
  
  // ... å…¶ä»–ç»˜åˆ¶æ–¹æ³•ï¼ˆçœ¼ç›ã€ç¿…è†€ã€å°¾å·´ç­‰ï¼‰
}
```

### ğŸ’¡ æ•™å­¦é‡ç‚¹

**ç‰©ç†æ¨¡æ‹Ÿå…³é”®æ¦‚å¿µï¼š**
1. **é‡åŠ›ç³»ç»Ÿ**: `velocity += gravity * dt`
2. **ä½ç½®æ›´æ–°**: `position.y += velocity * dt`
3. **è¾¹ç•Œæ£€æµ‹**: é˜²æ­¢å°é¸Ÿé£å‡ºå±å¹•
4. **è·³è·ƒæœºåˆ¶**: ç»™velocityèµ‹è´Ÿå€¼å®ç°å‘ä¸Šè¿åŠ¨

**è‡ªå®šä¹‰ç»˜åˆ¶æŠ€å·§ï¼š**
1. ä½¿ç”¨`Canvas`å’Œ`Paint`è¿›è¡Œç»˜åˆ¶
2. æ¸å˜æ•ˆæœè®©å›¾å½¢æ›´ç”ŸåŠ¨
3. åŠ¨ç”»é€šè¿‡æ”¹å˜è§’åº¦å’Œä½ç½®å®ç°
4. åˆ†å±‚ç»˜åˆ¶åˆ›å»ºç«‹ä½“æ•ˆæœ

---

## åˆ¶ä½œç®¡é“éšœç¢

### ğŸ¯ å­¦ä¹ ç›®æ ‡
- å­¦ä¹ éšœç¢ç‰©ç”Ÿæˆç³»ç»Ÿ
- æŒæ¡éšæœºæ•°ç”Ÿæˆå’Œéš¾åº¦è°ƒèŠ‚
- ç†è§£å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç®¡ç†

### ç®¡é“ç³»ç»Ÿè®¾è®¡

åˆ›å»º `lib/game/pipe.dart`ï¼š

```dart
import 'package:flame/collisions.dart';
import 'package:flame/components.dart';
import 'package:flutter/material.dart';
import 'flappy_game.dart';

// å•ä¸ªç®¡é“ç»„ä»¶
class Pipe extends PositionComponent with CollisionCallbacks {
  final bool isTop;
  
  Pipe({required this.isTop, required Vector2 pipeSize}) : super(size: pipeSize);
  
  @override
  Future<void> onLoad() async {
    await super.onLoad();
    
    // æ·»åŠ ç¢°æ’æ£€æµ‹
    add(RectangleHitbox());
  }
  
  @override
  void render(Canvas canvas) {
    super.render(canvas);
    
    // åˆ›å»ºç®¡é“æ¸å˜æ•ˆæœ
    final gradient = LinearGradient(
      begin: Alignment.centerLeft,
      end: Alignment.centerRight,
      colors: [
        Colors.green.shade700,
        Colors.green.shade500,
        Colors.green.shade600,
      ],
    );
    
    final paint = Paint()
      ..shader = gradient.createShader(
        Rect.fromLTWH(0, 0, size.x, size.y),
      );
    
    // ç»˜åˆ¶ç®¡é“ä¸»ä½“
    canvas.drawRect(
      Rect.fromLTWH(0, 0, size.x, size.y),
      paint,
    );
    
    // ç»˜åˆ¶é«˜å…‰æ•ˆæœ
    final highlightPaint = Paint()
      ..color = Colors.green.shade300.withValues(alpha: 0.5)
      ..style = PaintingStyle.stroke
      ..strokeWidth = 2;
    
    canvas.drawLine(
      const Offset(5, 0),
      Offset(5, size.y),
      highlightPaint,
    );
  }
}

// ç®¡é“ç»„ï¼ˆä¸Šä¸‹ç®¡é“çš„ç»„åˆï¼‰
class PipeGroup extends PositionComponent {
  final FlappyGame game;
  final double gapSize;
  bool scored = false;
  
  late Pipe topPipe;
  late Pipe bottomPipe;
  
  PipeGroup({required this.game, required this.gapSize});
  
  @override
  Future<void> onLoad() async {
    await super.onLoad();
    
    // éšæœºç”Ÿæˆé—´éš™ä½ç½®
    final random = Random();
    final gapY = random.nextDouble() * (game.size.y - gapSize - 200) + 100;
    
    // åˆ›å»ºä¸Šç®¡é“
    topPipe = Pipe(
      isTop: true,
      pipeSize: Vector2(80, gapY),
    );
    topPipe.position = Vector2(0, 0);
    add(topPipe);
    
    // åˆ›å»ºä¸‹ç®¡é“
    bottomPipe = Pipe(
      isTop: false,
      pipeSize: Vector2(80, game.size.y - gapY - gapSize),
    );
    bottomPipe.position = Vector2(0, gapY + gapSize);
    add(bottomPipe);
    
    // è®¾ç½®ç§»åŠ¨é€Ÿåº¦
    _setupMovement();
  }
  
  void _setupMovement() {
    // ç®¡é“ä»å³å‘å·¦ç§»åŠ¨
    final moveSpeed = 150.0; // åƒç´ /ç§’
    
    add(
      MoveEffect.to(
        Vector2(-100, position.y), // ç§»åŠ¨åˆ°å±å¹•å·¦ä¾§
        EffectController(
          duration: (game.size.x + 100) / moveSpeed,
          linear: true,
        ),
      ),
    );
  }
  
  @override
  void update(double dt) {
    super.update(dt);
    
    // ç§»åŠ¨ç®¡é“
    position.x -= 150 * dt;
    
    // ç§»å‡ºå±å¹•åè‡ªåŠ¨ç§»é™¤
    if (position.x < -100) {
      removeFromParent();
    }
  }
}
```

### ç®¡é“ç”Ÿæˆç³»ç»Ÿ

åœ¨ `FlappyGame` ä¸­æ·»åŠ ç®¡é“ç”Ÿæˆé€»è¾‘ï¼š

```dart
class FlappyGame extends FlameGame with TapDetector, HasCollisionDetection {
  // ... å…¶ä»–ä»£ç 
  
  // æ ¹æ®éš¾åº¦è°ƒæ•´ç®¡é“å‚æ•°
  double get pipeGapSize {
    switch (difficulty) {
      case Difficulty.easy:
        return 200;   // ç®€å•ï¼šå¤§é—´éš™
      case Difficulty.normal:
        return 160;   // æ™®é€šï¼šä¸­ç­‰é—´éš™
      case Difficulty.hard:
        return 120;   // å›°éš¾ï¼šå°é—´éš™
    }
  }
  
  double get pipeHorizontalGap {
    switch (difficulty) {
      case Difficulty.easy:
        return 300;   // ç®€å•ï¼šç®¡é“é—´è·å¤§
      case Difficulty.normal:
        return 250;   // æ™®é€šï¼šä¸­ç­‰é—´è·
      case Difficulty.hard:
        return 200;   // å›°éš¾ï¼šé—´è·å°
    }
  }
  
  void _updateGameLogic(double dt) {
    // ç®¡é“ç”Ÿæˆé€»è¾‘
    pipeSpawnTimer += dt;
    if (pipeSpawnTimer >= pipeSpawnInterval) {
      spawnPipe();
      pipeSpawnTimer = 0;
    }
    
    // æ£€æŸ¥å¾—åˆ†
    _checkScoring();
    
    // æ¸…ç†è¿‡æœŸç®¡é“
    _cleanupPipes();
  }
  
  void spawnPipe() {
    final pipeGroup = PipeGroup(
      game: this,
      gapSize: pipeGapSize,
    );
    add(pipeGroup);
    pipeGroup.position.x = size.x; // åœ¨å±å¹•å³ä¾§ç”Ÿæˆ
  }
  
  void _checkScoring() {
    final pipeGroups = children.whereType<PipeGroup>().toList();
    
    for (final pipeGroup in pipeGroups) {
      // æ£€æŸ¥å°é¸Ÿæ˜¯å¦é€šè¿‡äº†ç®¡é“
      if (!pipeGroup.scored && 
          pipeGroup.position.x + 40 < bird.position.x) {
        pipeGroup.scored = true;
        incrementScore();
      }
    }
  }
  
  void incrementScore() {
    score++;
    scoreText.updateScore(score);
    audioService.playScore();
    
    // åˆ›å»ºå¾—åˆ†ç‰¹æ•ˆ
    particleManager.createScoreParticles(scoreText, Vector2(size.x / 2, 80));
  }
}
```

### ğŸ’¡ æ•™å­¦é‡ç‚¹

**éšœç¢ç‰©ç³»ç»Ÿè®¾è®¡ï¼š**
1. **ç»„åˆæ¨¡å¼**: PipeGroupåŒ…å«ä¸Šä¸‹ä¸¤ä¸ªPipe
2. **éšæœºç”Ÿæˆ**: ä½¿ç”¨Randomç±»ç”Ÿæˆä¸åŒé«˜åº¦çš„é—´éš™
3. **å¯¹è±¡æ± æ¦‚å¿µ**: è‡ªåŠ¨ç§»é™¤ç¦»å¼€å±å¹•çš„ç®¡é“èŠ‚çœå†…å­˜
4. **éš¾åº¦è°ƒèŠ‚**: é€šè¿‡æ”¹å˜é—´éš™å¤§å°å’Œé—´è·è°ƒæ•´éš¾åº¦

**æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼š**
1. åŠæ—¶ç§»é™¤ä¸éœ€è¦çš„å¯¹è±¡
2. ä½¿ç”¨å¯¹è±¡æ± é‡ç”¨å¯¹è±¡ï¼ˆè¿›é˜¶æŠ€å·§ï¼‰
3. åˆç†çš„ç¢°æ’æ£€æµ‹å½¢çŠ¶é€‰æ‹©

---

## ç¬¬ä¸‰ç« ï¼šç‰©ç†ç³»ç»Ÿä¸é‡åŠ›

### ğŸ¯ å­¦ä¹ ç›®æ ‡
- æ·±å…¥ç†è§£æ¸¸æˆç‰©ç†åŸç†
- æŒæ¡é‡åŠ›ç³»ç»Ÿå®ç°
- å­¦ä¹ ç¢°æ’æ£€æµ‹æœºåˆ¶

### ç‰©ç†ç³»ç»Ÿæ ¸å¿ƒæ¦‚å¿µ

```dart
// åœ¨FlappyGameä¸­å®šä¹‰é‡åŠ›å‚æ•°
double get gravity {
  switch (difficulty) {
    case Difficulty.easy:
      return 980;   // è¾ƒå°çš„é‡åŠ›
    case Difficulty.normal:
      return 1200;  // æ ‡å‡†é‡åŠ›
    case Difficulty.hard:
      return 1500;  // è¾ƒå¤§çš„é‡åŠ›
  }
}
```

### ç¢°æ’æ£€æµ‹ç³»ç»Ÿ

```dart
class Bird extends PositionComponent with CollisionCallbacks {
  // ... å…¶ä»–ä»£ç 
  
  @override
  void onCollision(Set<Vector2> intersectionPoints, PositionComponent other) {
    super.onCollision(intersectionPoints, other);
    
    // æ£€æµ‹ä¸ç®¡é“çš„ç¢°æ’
    if (other is Pipe && !game.isGameOver && !isDying) {
      game.audioService.playHit();
      
      // åˆ›å»ºç¢°æ’ç‰¹æ•ˆ
      game.particleManager.createHitParticles(this, position);
      
      // å¼€å§‹æ­»äº¡åŠ¨ç”»
      startDeathAnimation();
      
      // æ¸¸æˆç»“æŸ
      game.gameOver();
    }
  }
}
```

### ğŸ’¡ æ•™å­¦é‡ç‚¹

**ç‰©ç†æ¨¡æ‹Ÿçš„æ ¸å¿ƒå…¬å¼ï¼š**
1. `é€Ÿåº¦ = é€Ÿåº¦ + åŠ é€Ÿåº¦ * æ—¶é—´`
2. `ä½ç½® = ä½ç½® + é€Ÿåº¦ * æ—¶é—´`
3. é‡åŠ›æ˜¯ä¸€ä¸ªæŒç»­å‘ä¸‹çš„åŠ é€Ÿåº¦

---

## ç¬¬å››ç« ï¼šä¸»èœå•ç•Œé¢

### ğŸ¯ å­¦ä¹ ç›®æ ‡
- æŒæ¡Flutterç•Œé¢è®¾è®¡
- å­¦ä¹ çŠ¶æ€ç®¡ç†
- ç†è§£å¯¼èˆªç³»ç»Ÿ

### ä¸»èœå•å®ç°

åˆ›å»º `lib/screens/home_screen.dart`ï¼š

```dart
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import '../l10n/app_localizations.dart';
import '../services/storage_service.dart';
import '../services/audio_service.dart';
import 'countdown_screen.dart';

class HomeScreen extends StatefulWidget {
  const HomeScreen({super.key});

  @override
  State<HomeScreen> createState() => _HomeScreenState();
}

class _HomeScreenState extends State<HomeScreen> {
  final TextEditingController _playerIdController = TextEditingController();
  Difficulty _selectedDifficulty = Difficulty.normal;
  late StorageService _storageService;
  
  @override
  void initState() {
    super.initState();
    _storageService = context.read<StorageService>();
    _playerIdController.text = _storageService.playerId ?? '';
    _initAudio();
  }
  
  void _initAudio() async {
    final audioService = AudioService();
    await audioService.init();
    
    // åŠ è½½ä¿å­˜çš„è®¾ç½®
    final prefs = await _storageService.prefs;
    final musicEnabled = prefs.getBool('musicEnabled') ?? true;
    if (musicEnabled) {
      await audioService.startBackgroundMusic();
    }
  }
  
  void _startGame() async {
    final playerId = _playerIdController.text.trim();
    if (playerId.isEmpty) {
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(
          content: Text(AppLocalizations.of(context)!.playerIdRequired),
        ),
      );
      return;
    }
    
    await _storageService.setPlayerId(playerId);
    
    if (mounted) {
      Navigator.push(
        context,
        MaterialPageRoute(
          builder: (context) => CountdownScreen(difficulty: _selectedDifficulty),
        ),
      );
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Container(
        decoration: const BoxDecoration(
          gradient: LinearGradient(
            begin: Alignment.topCenter,
            end: Alignment.bottomCenter,
            colors: [Colors.lightBlue, Colors.lightBlueAccent],
          ),
        ),
        child: SafeArea(
          child: Center(
            child: SingleChildScrollView(
              padding: const EdgeInsets.all(32.0),
              child: Column(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  // æ¸¸æˆæ ‡é¢˜å’Œå›¾æ ‡
                  const Icon(
                    Icons.flutter_dash,
                    size: 100,
                    color: Colors.white,
                  ),
                  const SizedBox(height: 16),
                  Text(
                    AppLocalizations.of(context)!.appTitle,
                    style: const TextStyle(
                      fontSize: 48,
                      fontWeight: FontWeight.bold,
                      color: Colors.white,
                      shadows: [
                        Shadow(
                          blurRadius: 10.0,
                          color: Colors.black26,
                          offset: Offset(2.0, 2.0),
                        ),
                      ],
                    ),
                  ),
                  
                  const SizedBox(height: 48),
                  
                  // æ¸¸æˆè®¾ç½®å¡ç‰‡
                  Container(
                    padding: const EdgeInsets.all(24),
                    decoration: BoxDecoration(
                      color: Colors.white.withValues(alpha: 0.9),
                      borderRadius: BorderRadius.circular(20),
                      boxShadow: [
                        BoxShadow(
                          color: Colors.black.withValues(alpha: 0.1),
                          blurRadius: 10,
                          offset: const Offset(0, 5),
                        ),
                      ],
                    ),
                    child: Column(
                      children: [
                        // ç©å®¶IDè¾“å…¥
                        TextField(
                          controller: _playerIdController,
                          decoration: InputDecoration(
                            labelText: AppLocalizations.of(context)!.playerId,
                            hintText: AppLocalizations.of(context)!.enterNickname,
                            prefixIcon: const Icon(Icons.person),
                            border: OutlineInputBorder(
                              borderRadius: BorderRadius.circular(10),
                            ),
                          ),
                        ),
                        
                        const SizedBox(height: 24),
                        
                        // éš¾åº¦é€‰æ‹©
                        Text(
                          AppLocalizations.of(context)!.selectDifficulty,
                          style: const TextStyle(
                            fontSize: 18,
                            fontWeight: FontWeight.bold,
                          ),
                        ),
                        const SizedBox(height: 16),
                        
                        // éš¾åº¦é€‰æ‹©æŒ‰é’®
                        SegmentedButton<Difficulty>(
                          segments: [
                            ButtonSegment(
                              value: Difficulty.easy,
                              label: Text(AppLocalizations.of(context)!.easy),
                              icon: const Icon(Icons.sentiment_satisfied),
                            ),
                            ButtonSegment(
                              value: Difficulty.normal,
                              label: Text(AppLocalizations.of(context)!.normal),
                              icon: const Icon(Icons.sentiment_neutral),
                            ),
                            ButtonSegment(
                              value: Difficulty.hard,
                              label: Text(AppLocalizations.of(context)!.hard),
                              icon: const Icon(Icons.sentiment_very_dissatisfied),
                            ),
                          ],
                          selected: {_selectedDifficulty},
                          onSelectionChanged: (Set<Difficulty> newSelection) {
                            setState(() {
                              _selectedDifficulty = newSelection.first;
                            });
                          },
                        ),
                        
                        const SizedBox(height: 16),
                        
                        // æ˜¾ç¤ºæœ€é«˜åˆ†
                        Text(
                          AppLocalizations.of(context)!.highScore(
                            _storageService.getHighScore(_selectedDifficulty)
                          ),
                          style: const TextStyle(
                            fontSize: 16,
                            fontWeight: FontWeight.w500,
                          ),
                        ),
                      ],
                    ),
                  ),
                  
                  const SizedBox(height: 32),
                  
                  // å¼€å§‹æ¸¸æˆæŒ‰é’®
                  ElevatedButton(
                    onPressed: _startGame,
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.orange,
                      foregroundColor: Colors.white,
                      padding: const EdgeInsets.symmetric(
                        horizontal: 48,
                        vertical: 16,
                      ),
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(30),
                      ),
                      elevation: 5,
                    ),
                    child: Text(
                      AppLocalizations.of(context)!.startGame,
                      style: const TextStyle(
                        fontSize: 24,
                        fontWeight: FontWeight.bold,
                      ),
                    ),
                  ),
                ],
              ),
            ),
          ),
        ),
      ),
    );
  }
}
```

### ğŸ’¡ æ•™å­¦é‡ç‚¹

**ç•Œé¢è®¾è®¡åŸåˆ™ï¼š**
1. **è§†è§‰å±‚æ¬¡**: ä½¿ç”¨å¤§å°ã€é¢œè‰²ã€é—´è·åˆ›å»ºå±‚æ¬¡
2. **å“åº”å¼è®¾è®¡**: ä½¿ç”¨SingleChildScrollViewé€‚é…ä¸åŒå±å¹•
3. **ç”¨æˆ·ä½“éªŒ**: æ¸…æ™°çš„è¾“å…¥æç¤ºå’Œé”™è¯¯å¤„ç†
4. **è§†è§‰åé¦ˆ**: æŒ‰é’®çš„ç‚¹å‡»æ•ˆæœå’Œé˜´å½±

---

## ç¬¬äº”ç« ï¼šéŸ³é¢‘ç³»ç»Ÿè®¾è®¡

### ğŸ¯ å­¦ä¹ ç›®æ ‡
- æŒæ¡FlutteréŸ³é¢‘æ’­æ”¾
- å­¦ä¹ å•ä¾‹æ¨¡å¼åº”ç”¨
- ç†è§£èµ„æºç®¡ç†

### éŸ³é¢‘æœåŠ¡å®ç°

åˆ›å»º `lib/services/audio_service.dart`ï¼š

```dart
import 'package:audioplayers/audioplayers.dart';
import 'package:flutter/foundation.dart';

class AudioService {
  static final AudioService _instance = AudioService._internal();
  factory AudioService() => _instance;
  AudioService._internal();

  final AudioPlayer _sfxPlayer = AudioPlayer();
  final AudioPlayer _bgmPlayer = AudioPlayer();
  
  bool _soundEnabled = true;
  bool _musicEnabled = true;
  double _sfxVolume = 0.7;
  double _musicVolume = 0.3;

  // å…¬å¼€çš„getteræ–¹æ³•
  bool get soundEnabled => _soundEnabled;
  bool get musicEnabled => _musicEnabled;
  double get sfxVolume => _sfxVolume;
  double get musicVolume => _musicVolume;

  Future<void> init() async {
    await _sfxPlayer.setReleaseMode(ReleaseMode.stop);
    await _bgmPlayer.setReleaseMode(ReleaseMode.loop);
    
    await _sfxPlayer.setVolume(_sfxVolume);
    await _bgmPlayer.setVolume(_musicVolume);
  }

  // æ’­æ”¾è·³è·ƒéŸ³æ•ˆ
  Future<void> playJump() async {
    if (!_soundEnabled) return;
    try {
      await _sfxPlayer.play(AssetSource('sounds/jump.wav'));
    } catch (e) {
      debugPrint('æ’­æ”¾è·³è·ƒéŸ³æ•ˆå‡ºé”™: $e');
    }
  }

  // æ’­æ”¾å¾—åˆ†éŸ³æ•ˆ
  Future<void> playScore() async {
    if (!_soundEnabled) return;
    try {
      await _sfxPlayer.play(AssetSource('sounds/score.wav'));
    } catch (e) {
      debugPrint('æ’­æ”¾å¾—åˆ†éŸ³æ•ˆå‡ºé”™: $e');
    }
  }

  // æ’­æ”¾ç¢°æ’éŸ³æ•ˆ
  Future<void> playHit() async {
    if (!_soundEnabled) return;
    try {
      await _sfxPlayer.play(AssetSource('sounds/hit.wav'));
    } catch (e) {
      debugPrint('æ’­æ”¾ç¢°æ’éŸ³æ•ˆå‡ºé”™: $e');
    }
  }

  // æ’­æ”¾æ¸¸æˆç»“æŸéŸ³æ•ˆ
  Future<void> playGameOver() async {
    if (!_soundEnabled) return;
    try {
      await _sfxPlayer.play(AssetSource('sounds/game_over.wav'));
    } catch (e) {
      debugPrint('æ’­æ”¾æ¸¸æˆç»“æŸéŸ³æ•ˆå‡ºé”™: $e');
    }
  }

  // å¼€å§‹æ’­æ”¾èƒŒæ™¯éŸ³ä¹
  Future<void> startBackgroundMusic() async {
    if (!_musicEnabled) return;
    try {
      // é¢„åŠ è½½éŸ³é¢‘ä»¥é¿å…å¾ªç¯é—´éš™
      await _bgmPlayer.setSource(AssetSource('sounds/background_music.mp3'));
      await _bgmPlayer.setReleaseMode(ReleaseMode.loop);
      await _bgmPlayer.resume();
    } catch (e) {
      debugPrint('æ’­æ”¾èƒŒæ™¯éŸ³ä¹å‡ºé”™: $e');
    }
  }

  // åœæ­¢èƒŒæ™¯éŸ³ä¹
  Future<void> stopBackgroundMusic() async {
    await _bgmPlayer.stop();
  }

  // æš‚åœèƒŒæ™¯éŸ³ä¹
  Future<void> pauseBackgroundMusic() async {
    await _bgmPlayer.pause();
  }

  // æ¢å¤èƒŒæ™¯éŸ³ä¹
  Future<void> resumeBackgroundMusic() async {
    if (!_musicEnabled) return;
    await _bgmPlayer.resume();
  }

  // è®¾ç½®éŸ³æ•ˆå¼€å…³
  void setSoundEnabled(bool enabled) {
    _soundEnabled = enabled;
    if (!enabled) {
      _sfxPlayer.stop();
    }
  }

  // è®¾ç½®éŸ³ä¹å¼€å…³
  void setMusicEnabled(bool enabled) {
    _musicEnabled = enabled;
    if (enabled) {
      startBackgroundMusic();
    } else {
      stopBackgroundMusic();
    }
  }

  // è®¾ç½®éŸ³æ•ˆéŸ³é‡
  void setSfxVolume(double volume) {
    _sfxVolume = volume.clamp(0.0, 1.0);
    _sfxPlayer.setVolume(_sfxVolume);
  }

  // è®¾ç½®éŸ³ä¹éŸ³é‡
  void setMusicVolume(double volume) {
    _musicVolume = volume.clamp(0.0, 1.0);
    _bgmPlayer.setVolume(_musicVolume);
  }

  // é‡Šæ”¾èµ„æº
  void dispose() {
    _sfxPlayer.dispose();
    _bgmPlayer.dispose();
  }
}
```

### ğŸ’¡ æ•™å­¦é‡ç‚¹

**å•ä¾‹æ¨¡å¼çš„åº”ç”¨ï¼š**
```dart
class AudioService {
  static final AudioService _instance = AudioService._internal();
  factory AudioService() => _instance;
  AudioService._internal();
  
  // è¿™æ ·ç¡®ä¿æ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªAudioServiceå®ä¾‹
}
```

**èµ„æºç®¡ç†æœ€ä½³å®è·µï¼š**
1. åœ¨åº”ç”¨å¯åŠ¨æ—¶åˆå§‹åŒ–éŸ³é¢‘æœåŠ¡
2. æ­£ç¡®è®¾ç½®ReleaseModeé¿å…å†…å­˜æ³„æ¼
3. ä½¿ç”¨try-catchå¤„ç†éŸ³é¢‘æ’­æ”¾é”™è¯¯
4. åœ¨åº”ç”¨é€€å‡ºæ—¶é‡Šæ”¾èµ„æº

---

## ç¬¬å…­ç« ï¼šæœ¬åœ°æ•°æ®å­˜å‚¨

### ğŸ¯ å­¦ä¹ ç›®æ ‡
- æŒæ¡SharedPreferencesä½¿ç”¨
- å­¦ä¹ æ•°æ®æŒä¹…åŒ–
- ç†è§£å¼‚æ­¥ç¼–ç¨‹

### å­˜å‚¨æœåŠ¡å®ç°

åˆ›å»º `lib/services/storage_service.dart`ï¼š

```dart
import 'package:shared_preferences/shared_preferences.dart';

enum Difficulty { easy, normal, hard }

class StorageService {
  late SharedPreferences _prefs;
  
  static const String _playerIdKey = 'player_id';
  static const String _highScoreEasyKey = 'high_score_easy';
  static const String _highScoreNormalKey = 'high_score_normal';
  static const String _highScoreHardKey = 'high_score_hard';
  
  // æä¾›prefsè®¿é—®å™¨ä¾›è®¾ç½®é¡µé¢ä½¿ç”¨
  Future<SharedPreferences> get prefs async => _prefs;
  
  Future<void> init() async {
    _prefs = await SharedPreferences.getInstance();
  }
  
  // è·å–ç©å®¶ID
  String? get playerId => _prefs.getString(_playerIdKey);
  
  // è®¾ç½®ç©å®¶ID
  Future<void> setPlayerId(String id) async {
    await _prefs.setString(_playerIdKey, id);
  }
  
  // è·å–æœ€é«˜åˆ†
  int getHighScore(Difficulty difficulty) {
    switch (difficulty) {
      case Difficulty.easy:
        return _prefs.getInt(_highScoreEasyKey) ?? 0;
      case Difficulty.normal:
        return _prefs.getInt(_highScoreNormalKey) ?? 0;
      case Difficulty.hard:
        return _prefs.getInt(_highScoreHardKey) ?? 0;
    }
  }
  
  // è®¾ç½®æœ€é«˜åˆ†
  Future<void> setHighScore(Difficulty difficulty, int score) async {
    switch (difficulty) {
      case Difficulty.easy:
        await _prefs.setInt(_highScoreEasyKey, score);
        break;
      case Difficulty.normal:
        await _prefs.setInt(_highScoreNormalKey, score);
        break;
      case Difficulty.hard:
        await _prefs.setInt(_highScoreHardKey, score);
        break;
    }
  }
  
  // å¦‚æœéœ€è¦çš„è¯æ›´æ–°æœ€é«˜åˆ†
  Future<bool> updateHighScoreIfNeeded(Difficulty difficulty, int newScore) async {
    final currentHighScore = getHighScore(difficulty);
    if (newScore > currentHighScore) {
      await setHighScore(difficulty, newScore);
      return true; // è¿”å›trueè¡¨ç¤ºåˆ›é€ äº†æ–°çºªå½•
    }
    return false;
  }
}
```

### ğŸ’¡ æ•™å­¦é‡ç‚¹

**å¼‚æ­¥ç¼–ç¨‹åŸºç¡€ï¼š**
```dart
// async/awaitå…³é”®å­—çš„ä½¿ç”¨
Future<void> init() async {
  _prefs = await SharedPreferences.getInstance();
}

// æ­£ç¡®å¤„ç†å¼‚æ­¥è°ƒç”¨
void _loadData() async {
  final score = storageService.getHighScore(Difficulty.easy);
  // ä½¿ç”¨æ•°æ®...
}
```

---

## ç¬¬ä¸ƒç« ï¼šå¤šè¯­è¨€æ”¯æŒ

### ğŸ¯ å­¦ä¹ ç›®æ ‡
- æŒæ¡Flutterå›½é™…åŒ–
- å­¦ä¹ ARBæ–‡ä»¶æ ¼å¼
- ç†è§£æœ¬åœ°åŒ–æµç¨‹

### é…ç½®å›½é™…åŒ–

åœ¨ `pubspec.yaml` ä¸­æ·»åŠ ï¼š

```yaml
flutter:
  generate: true
  
dependencies:
  flutter_localizations:
    sdk: flutter
  intl: ^0.20.2
```

åˆ›å»º `l10n.yaml`ï¼š

```yaml
arb-dir: lib/l10n
template-arb-file: app_en.arb
output-localization-file: app_localizations.dart
```

### åˆ›å»ºç¿»è¯‘æ–‡ä»¶

åˆ›å»º `lib/l10n/app_en.arb`ï¼ˆè‹±æ–‡ï¼‰ï¼š

```json
{
  "@@locale": "en",
  "appTitle": "Flappy Bird",
  "@appTitle": {
    "description": "The title of the application"
  },
  "playerId": "Player ID",
  "@playerId": {
    "description": "Label for player ID input"
  },
  "enterNickname": "Enter your game nickname",
  "selectDifficulty": "Select Difficulty",
  "easy": "Easy",
  "normal": "Normal",
  "hard": "Hard",
  "highScore": "High Score: {score}",
  "@highScore": {
    "description": "High score display",
    "placeholders": {
      "score": {
        "type": "int"
      }
    }
  },
  "startGame": "Start Game",
  "gameOver": "Game Over",
  "newRecord": "ğŸ‰ New Record!",
  "score": "Score: {score}",
  "tryAgain": "Try Again",
  "backToHome": "Back to Home",
  "playerIdRequired": "Please enter Player ID"
}
```

åˆ›å»º `lib/l10n/app_zh.arb`ï¼ˆä¸­æ–‡ï¼‰ï¼š

```json
{
  "@@locale": "zh",
  "appTitle": "é£ç¿”çš„å°é¸Ÿ",
  "playerId": "ç©å®¶ ID",
  "enterNickname": "è¾“å…¥ä½ çš„æ¸¸æˆæ˜µç§°",
  "selectDifficulty": "é€‰æ‹©éš¾åº¦",
  "easy": "ç®€å•",
  "normal": "æ™®é€š",
  "hard": "å›°éš¾",
  "highScore": "æœ€é«˜åˆ†: {score}",
  "startGame": "å¼€å§‹æ¸¸æˆ",
  "gameOver": "æ¸¸æˆç»“æŸ",
  "newRecord": "ğŸ‰ æ–°çºªå½•ï¼",
  "score": "å¾—åˆ†: {score}",
  "tryAgain": "é‡æ–°å¼€å§‹",
  "backToHome": "è¿”å›ä¸»é¡µ",
  "playerIdRequired": "è¯·è¾“å…¥ç©å®¶ ID"
}
```

### åœ¨ä»£ç ä¸­ä½¿ç”¨

```dart
import '../l10n/app_localizations.dart';

// åœ¨Widgetä¸­ä½¿ç”¨
Text(AppLocalizations.of(context)!.appTitle)

// å¸¦å‚æ•°çš„æ–‡æœ¬
Text(AppLocalizations.of(context)!.highScore(score))
```

### ğŸ’¡ æ•™å­¦é‡ç‚¹

**å›½é™…åŒ–æœ€ä½³å®è·µï¼š**
1. æ‰€æœ‰ç”¨æˆ·å¯è§çš„æ–‡æœ¬éƒ½åº”è¯¥å›½é™…åŒ–
2. ä½¿ç”¨æè¿°æ€§çš„keyåç§°
3. ä¸ºå¤æ‚æ–‡æœ¬æä¾›ä¸Šä¸‹æ–‡æè¿°
4. æµ‹è¯•ä¸åŒè¯­è¨€ä¸‹çš„ç•Œé¢å¸ƒå±€

---

## ğŸ“ å­¦ä¹ æ€»ç»“

é€šè¿‡å®Œæˆè¿™ä¸ªFlappy Birdé¡¹ç›®ï¼Œä½ å·²ç»æŒæ¡äº†ï¼š

### ğŸ¯ Flutteræ ¸å¿ƒæŠ€èƒ½
- **Widgetç»„åˆ**: ä½¿ç”¨å„ç§Flutterç»„ä»¶æ„å»ºç•Œé¢
- **çŠ¶æ€ç®¡ç†**: Provideræ¨¡å¼å’Œç»„ä»¶çŠ¶æ€ç®¡ç†
- **å¯¼èˆªç³»ç»Ÿ**: é¡µé¢é—´çš„è·³è½¬å’Œæ•°æ®ä¼ é€’
- **åŠ¨ç”»ç³»ç»Ÿ**: è¡¥é—´åŠ¨ç”»å’Œæ§åˆ¶å™¨ä½¿ç”¨
- **è‡ªå®šä¹‰ç»˜åˆ¶**: Canvaså’ŒPaintçš„ä½¿ç”¨

### ğŸ® æ¸¸æˆå¼€å‘æŠ€èƒ½
- **Flameå¼•æ“**: æ¸¸æˆå¾ªç¯ã€ç»„ä»¶ç³»ç»Ÿã€äº‹ä»¶å¤„ç†
- **ç‰©ç†æ¨¡æ‹Ÿ**: é‡åŠ›ã€é€Ÿåº¦ã€ç¢°æ’æ£€æµ‹
- **èµ„æºç®¡ç†**: éŸ³é¢‘ã€å›¾ç‰‡ã€å†…å­˜ç®¡ç†
- **æ€§èƒ½ä¼˜åŒ–**: å¯¹è±¡æ± ã€åŠæ—¶æ¸…ç†ã€åˆç†çš„æ›´æ–°é¢‘ç‡

### ğŸ› ï¸ å®ç”¨æŠ€èƒ½
- **é¡¹ç›®æ¶æ„**: æ¸…æ™°çš„æ–‡ä»¶ç»„ç»‡å’ŒèŒè´£åˆ†ç¦»
- **é”™è¯¯å¤„ç†**: try-catchå’Œå¼‚æ­¥é”™è¯¯å¤„ç†
- **å›½é™…åŒ–**: å¤šè¯­è¨€æ”¯æŒå’Œæœ¬åœ°åŒ–
- **æ•°æ®æŒä¹…åŒ–**: æœ¬åœ°å­˜å‚¨å’Œè®¾ç½®ç®¡ç†

## ğŸš€ è¿›é˜¶å­¦ä¹ å»ºè®®

### ä¸‹ä¸€æ­¥å¯ä»¥å°è¯•ï¼š
1. **ç½‘ç»œåŠŸèƒ½**: æ·»åŠ åœ¨çº¿æ’è¡Œæ¦œ
2. **æ›´å¤šç‰¹æ•ˆ**: ç²’å­ç³»ç»Ÿä¼˜åŒ–ã€shaderæ•ˆæœ
3. **æ–°åŠŸèƒ½**: é“å…·ç³»ç»Ÿã€å¤šç§é¸Ÿç±»
4. **å¹³å°ç‰¹æ€§**: æ¨é€é€šçŸ¥ã€ç¤¾äº¤åˆ†äº«
5. **æ€§èƒ½ä¼˜åŒ–**: å¸§ç‡ç›‘æ§ã€å†…å­˜ä¼˜åŒ–

### æ¨èå­¦ä¹ èµ„æºï¼š
- [Flutterå®˜æ–¹æ–‡æ¡£](https://flutter.dev/docs)
- [Flameå¼•æ“æ–‡æ¡£](https://docs.flame-engine.org/)
- [Dartç¼–ç¨‹è¯­è¨€](https://dart.dev/guides)

## ğŸ“ è”ç³»æ–¹å¼

- **ä½œè€…**: Evil0ctal
- **GitHub**: [@Evil0ctal](https://github.com/Evil0ctal)
- **é¡¹ç›®åœ°å€**: [https://github.com/Evil0ctal/Flappy-Bird-Flutter](https://github.com/Evil0ctal/Flappy-Bird-Flutter)

---

**ğŸ‰ æ­å–œä½ å®Œæˆäº†Flutteræ¸¸æˆå¼€å‘æ•™ç¨‹ï¼**

*è¿™åªæ˜¯ä½ æ¸¸æˆå¼€å‘ä¹‹æ—…çš„å¼€å§‹ï¼Œç»§ç»­æ¢ç´¢æ›´å¤šå¯èƒ½æ€§å§ï¼*

â­ å¦‚æœè¿™ä¸ªæ•™ç¨‹å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™é¡¹ç›®ç‚¹ä¸ªStarï¼