# 🐦 Flappy Bird Flutter 游戏 - 产品需求文档（PRD）

## 📌 项目概述

本项目旨在使用 Flutter 框架开发一款复刻经典《Flappy Bird》的移动游戏，具备现代化精美 UI、丰富交互和游戏性设计。适用于 Android、iOS 和桌面平台。

---

## 🎮 核心功能

### ✅ 1. 小鸟飞行机制

* 点击屏幕让小鸟“上升”，松开后自动下坠（物理模拟重力加速度）
* 小鸟碰撞到任何柱子或地面则判定为失败
* 根据难度，控制：

    * 下坠速度
    * 柱子间隙大小
    * 横向间距

### ✅ 2. 三种游戏难度（关卡模式）

| 难度        | 上下柱子间隙 | 横向柱子间距 | 小鸟下坠速度 |
| --------- | ------ | ------ | ------ |
| 简单 Easy   | 大      | 宽      | 慢      |
| 普通 Normal | 中      | 中      | 中      |
| 困难 Hard   | 小      | 窄      | 快      |

> 玩家进入游戏前可选择难度，或从设置中修改。

---

## 🧑‍💼 玩家系统

### ✅ 玩家 ID 管理

* 玩家首次启动可设置一个唯一游戏 ID
* 存储于本地（`shared_preferences`）

### ✅ 分数系统

* 当前分数：飞跃障碍一次得 +1 分
* 历史最高分：保存在本地持久化（支持每个难度记录最高分）
* 游戏结束后展示当前成绩与历史记录

---

## ⏱️ 游戏启动流程

### ✅ 开始前流程：

1. 欢迎界面 + logo
2. 玩家设置界面：输入昵称/选择难度
3. 点击「开始游戏」后：

    * 3 秒倒计时动画（显示 3 → 2 → 1 → Go!）

---

## 🔊 音效与反馈

| 事件   | 音效/反馈          |
| ---- | -------------- |
| 点击起飞 | 翅膀挥动声          |
| 碰撞障碍 | 撞击声 + 振动（手机支持） |
| 得分   | “叮”声           |
| 倒计时  | “嘟嘟嘟 嘟——”音效    |
| 游戏结束 | 失败音效，弹出提示框     |

> 使用 `audioplayers` 或 `just_audio` 实现音效播放。

---

## 🖼️ 游戏画面设计（UI/UX）

### ✅ 背景层

* 可滚动背景图（城市风格 / 白天夜晚切换）

### ✅ 游戏层

* 小鸟精灵图（动态飞行动画）
* 上下柱子生成（带碰撞检测）
* 地面滚动图
* 难度区分颜色或主题风格（例如 Hard 模式为夜晚）

### ✅ HUD 层

* 分数数字
* 玩家昵称
* 游戏暂停按钮
* 返回主菜单按钮

---

## 📦 技术栈与插件

| 功能    | 插件建议                                                          |
| ----- | ------------------------------------------------------------- |
| 游戏核心  | [`flame`](https://pub.dev/packages/flame) 游戏引擎                |
| 音效播放  | `audioplayers`                                                |
| 本地存储  | `shared_preferences`                                          |
| 状态管理  | `provider` / `riverpod`                                       |
| UI 动画 | Flutter 自带的动画系统 (`AnimatedBuilder`, `Tween`, `CustomPainter`) |

---

## 📱 平台兼容性

| 平台      | 支持             |
| ------- | -------------- |
| Android | ✅ 支持           |
| iOS     | ✅ 支持           |
| macOS   | ✅ 推荐           |
| Web     | ⭕（可测试，但音效支持有限） |

---

## 📊 持久化数据设计

使用 `shared_preferences` 保存如下数据：

```json
{
  "player_id": "evil0ctal",
  "high_score_easy": 25,
  "high_score_normal": 12,
  "high_score_hard": 4
}
```

---

## 🧪 测试需求

| 模块   | 测试点             |
| ---- | --------------- |
| 小鸟控制 | 点击反应、下坠速度       |
| 碰撞逻辑 | 任意方向碰撞都结束游戏     |
| 音效播放 | 正确加载、播放、销毁      |
| 分数记录 | 正确加分、保存、读取历史最高分 |
| 难度调整 | 柱子变化是否按规则生效     |

---

## 🚀 后续可拓展功能（非 MVP）

* ✅ 排行榜（本地/在线）
* ✅ 小鸟皮肤自定义
* ✅ 柱子/主题场景切换
* ✅ 日夜切换动画
* ✅ 云端同步分数（Firebase）

---

## 📁 推荐目录结构

```plaintext
lib/
├── main.dart
├── game/
│   ├── flappy_game.dart        # Flame 游戏主循环
│   ├── bird.dart               # 小鸟对象
│   ├── pipe.dart               # 柱子对象
│   ├── background.dart         # 背景滚动
│   ├── score_text.dart         # 分数字体绘制
├── screens/
│   ├── home_screen.dart
│   ├── countdown_screen.dart
│   ├── game_over_screen.dart
│   └── settings_screen.dart
├── services/
│   └── storage_service.dart    # SharedPreferences 管理
├── utils/
│   └── audio_manager.dart
assets/
├── images/
├── sounds/
```

---

## ✅ 总结

> 这是一个复刻 Flappy Bird 的 Flutter 跨平台游戏项目，目标是以优秀的 UI 动画体验、丰富的交互细节、适配多平台为基础构建一个可持续维护的开源小游戏。
